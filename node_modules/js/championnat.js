var fs=require('fs');
var champion={}

var init = (function() {

})();

function charge() {
	champion={}
	var jours = ["J1","J2","J3","J4","J5","J6","J7"]
	for (var f=0; f<jours.length; f++ ) {
		var content = fs.readFileSync('./data/RESJR/'+jours[f]+'.json', 'utf8');
			content = JSON.parse(content);
			cumul(content)
	}
}

function cumul(f) {
	var res={}
	var cumul = {}
	for (var i=0; i<f.length; i++) {
		res = f[i]
		//console.log(res)
		cumul = {team:"",pts:0,nbMatch:0,bo:0, bd:0,pour:0,contre:0,gagne:0,neutre:0,perd:0,
				nbEssai:0, nbDrop:0, nbTransf:0, nbPenalite:0, dif:0, essctr:0}
		if (typeof(champion[res.team])!="undefined") {
			cumul = champion[res.team]
		}
		else {
			cumul.team = res.team
		}
		cumul.pts+=res.pts
		cumul.nbMatch += res.nbMatch
		cumul.bo += res.bo
		cumul.bd += res.bd
		cumul.pour += res.pour
		cumul.contre += res.contre
		cumul.gagne += res.gagne
		cumul.neutre += res.neutre
		cumul.perd += res.perd
		cumul.nbEssai += res.nbEssai
		cumul.nbDrop += res.nbDrop
		cumul.nbTransf += res.nbTransf
		cumul.nbPenalite += res.nbPenalite
		cumul.dif += res.dif
		cumul.essctr += res.essctr
		champion[res.team] = cumul
	}
}

exports.calcul=function() {
	charge()
	//console.log(champion)
	return champion
}