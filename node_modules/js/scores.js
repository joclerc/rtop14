var fs=require('fs');
var scores={}
scores["key"]=[] // cas ou le fichier est vide donc pas de jour dans l'objet
var file='./data/scores.json'

var init = (function() {
	fs.exists(file, function(exist) {
		if (exist) {
			var content = fs.readFileSync(file, 'utf8');
			content = JSON.parse(content);
			scores = content;
			if (typeof(scores["key"])=="undefined") {
				scores["key"]=[];
			}
			
		}
	});
	
exports.getScores=function (key) {
	var res=[]
	if (typeof(scores[key])!="undefined") 
		res = scores[key];
	return res
}

exports.addScores=function (sc) {
	var key = sc["score"]
	if (typeof(scores[key])=="undefined") {
		scores[key]=[]
	}
	scores[key].push(sc[key])
	fs.writeFileSync(file,JSON.stringify(scores,null,4));
}

})();